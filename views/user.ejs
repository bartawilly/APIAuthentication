<!DOCTYPE html>
<html lang="en">

    <% include partials/header.ejs %>

<body class="">
  <div class="wrapper ">
      <% include partials/sidebar.ejs %>
    <div class="main-panel">
      <!-- Navbar -->
      <% include partials/nav.ejs %>
      <!-- End Navbar -->
      <!-- <div class="panel-header panel-header-sm">
  
  
</div> -->
      <div class="content">
        <div class="row">
          <div class="col-md-12">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title">Edit Profile</h5>
              </div>
              <div class="card-body">
                <% if (updateUserError) { %>
                    <div class="alert alert-danger"><%= updateUserError %></div>
                <% } %>
                <form action="/users/updateuser" method="post" name="updateuser">
                  <div class="row">
                    <div class="col-md-6 pr-1">
                      <div class="form-group">
                        <label>Fisrt Name</label>
                        <input type="text" name="firstname" class="form-control" value="<%= user.firstName%>">
                      </div>
                    </div>
                    <div class="col-md-6 px-1">
                      <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" name="lastname" class="form-control"  value="<%= user.lastName%>">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12 pr-1">
                      <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email"  aria-describedby="emailHelp" class="form-control"  value="<%= user.email%>">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                      <div class="update ml-auto mr-auto">
                        <button type="submit" class="btn btn-primary btn-round">Update Profile</button>
                      </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header">
                  <h5 class="card-title">Edit Password</h5>
                </div>
                <div class="card-body">
                  <% if (updateUserPasswordError) { %>
                      <div class="alert alert-danger"><%= updateUserPasswordError %></div>
                  <% } %>
                  <form action="/users/updateuserpassword" method="post" name="updateuserpassword">
                    <div class="row">
                      <div class="col-md-12 pr-1">
                        <div class="form-group">
                          <label>Old Passowrd</label>
                          <input type="password" name="oldPassword"  class="form-control" >
                        </div>
                      <div class="row">
                          <div class="col-md-12 pr-1">
                            <div class="form-group">
                              <label>New Passowrd</label>
                              <input type="password" name="password" class="form-control" >
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="update ml-auto mr-auto">
                          <button type="submit" class="btn btn-primary btn-round">Update Password</button>
                        </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
      </div>
      <% include partials/footer.ejs %>
    </div>
  </div>
  <% include partials/scripts.ejs %>
  <script>
  $(function() {
    
    $("form[name='updateuser']").validate({
      rules: {
        firstname: "required",
        lastname: "required",
        email: {
          required: true,
          email: true
        },

      },
      
      messages: {
        firstname: "Please enter your firstname",
        lastname: "Please enter your lastname",
        email: "Please enter a valid email address"
      },
      submitHandler: function(form) {
        form.submit();
      }
    });
  });
  $(function() {
    
    $("form[name='updateuserpassword']").validate({
      rules: {

        password: {
          required: true,
          minlength: 5
        },
        oldPassword: {
          required: true,
          minlength: 5
        }

      },
      
      messages: {
        password: {
          required: "Please provide a new password",
          minlength: "Your password must be at least 5 characters long"
        },
        oldPassword: {
          required: "Please provide your old password",
          minlength: "Your password must be at least 5 characters long"
        }
      },
      submitHandler: function(form) {
        form.submit();
      }
    });
  });
  
  
  </script>
</body>

</html>